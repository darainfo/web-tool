import{_ as y,l as C,c as a,b as t,t as c,e as v,v as p,n as q,F as I,r as w,s as _,o as d,u as S}from"./index-92f5bd69.js";function Q(s){return/^-?\d+$/.test(s)}function b(s){if(s instanceof Uint8Array)return s;if(s instanceof Int8Array)return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);if(Array.isArray(s)){const e=new Uint8Array(s.length);for(let n=0;n<s.length;n++)e[n]=s[n]&255;return e}throw new Error("알 수 없는 바이트 배열 형식입니다.")}function T(s){const e=b(s);let n="";const l=32768;for(let r=0;r<e.length;r+=l)n+=String.fromCharCode.apply(null,e.subarray(r,r+l));return btoa(n)}const k={mounted(){let s=localStorage.getItem("vtoolQrText");s&&(document.getElementById("qrText").value=s)},data(){return{qrTextSize:0,scriptLoaded:!1,errorMessage:"",currentImgIdx:0,imgIdx:0,qrMaxSize:2e3,pagingQrTextMap:{},pagingNums:[],viewQrContent:"",qrImgSize:512,qrImgSizeItems:[128,256,512]}},methods:{textSize(s){this.qrTextSize=s.target.value.length},convert(){this.scriptLoaded?this.createQRCode():C({js:["/assets/static/js/plugins/lzma_worker-min.js","/assets/static/js/plugins/qrcode.min.js"]}).then(()=>{this.scriptLoaded=!0,this.createQRCode()}).catch(s=>{console.error("스크립트 로드 실패:",s)})},createQRCode(){let s=document.getElementById("qrText").value;const e=this.qrMaxSize;localStorage.setItem("vtoolQrText",s);let n="",l=0,r="",i="",o=0;LZMA.compress(s,6,(f,x)=>{if(x){this.errorMessage="압축 에러: "+x;return}try{const m=b(f);let h=T(m),g={};for(let u=0;u<h.length;u++)i=h.charAt(u),!(r==`
`&&i==`
`)&&(Q(i)?o++:escape(i).length>4?o+=4:o+=2,n+=i,o>e&&(++l,g[l]=n,o=0,n=""),r=i);n.length>0&&(++l,g[l]=n),this.pagingQrTextMap=g,this.imgIdx=l,this.viewImg(1)}catch(m){this.errorMessage="결과 처리 에러: "+m.message}})},qrImgDownload(){const s=document.getElementById("qrImageViewer"),e=document.createElement("a");e.href=s.toDataURL("image/png"),e.download="canvas-image.png",e.click()},viewPage(s){let e=0;s=="n"?e=this.currentImgIdx+1:e=this.currentImgIdx-1,e=e<1?1:this.imgIdx<=e?this.imgIdx:e,this.viewImg(e)},viewImg(s){this.currentImgIdx=s;let e=0,n=0;s<5?e=1:e=s-4,e+9>=this.imgIdx?n=this.imgIdx:n=e+9,e=n-e==9?e:n-9,e=e<0?1:e;let l=[];for(let i=e;i<=n;i++)l.push(i);this.pagingNums=l;let r=this.pagingQrTextMap[s];this.viewQrContent=r,QRCode.toCanvas(document.getElementById("qrImageViewer"),r,{errorCorrectionLevel:"M",width:this.qrImgSize},i=>{i?(this.errorMessage=i.message,console.error(i)):console.log("QR code generated!")})}}},M={class:"page-heading"},z={class:"page-title"},A={class:"row"},j={class:"col-12 col-md-6 order-md-1 order-last"},E={class:"section"},N={class:"card"},U={class:"card-body"},V={id:"mainForm"},B={class:"row"},L={class:"col-sm mb-3"},R={class:"mb-3"},D={class:"col-sm row mb-1"},P={class:"col-sm-8"},F={class:"col-sm row"},Z={class:"col-sm-8"},H=["value"],G={class:"mb-3 col-sm-12 clearfix"},K={class:"float-end"},O={class:"mb-1"},X={key:0,style:{clear:"both",color:"#ff0707","font-weight":"bold"}},J={class:"col-sm"},W={key:0,"aria-label":"Page navigation"},Y={style:{"text-align":"center"}},$={class:"pagination justify-content-center",style:{"margin-top":"10px"}},ee={class:"page-item"},te=["onClick"],se={class:"page-item"},oe={class:"float-end"};function re(s,e,n,l,r,i){return d(),a("div",M,[t("div",z,[t("div",A,[t("div",j,[t("h3",null,c(s.$t("menu.qr_qenerator")),1),e[10]||(e[10]=t("p",{class:"text-subtitle text-muted"},"Qr Code",-1))])])]),t("section",E,[t("div",N,[t("div",U,[t("form",V,[t("div",B,[t("div",L,[t("div",R,[t("div",D,[e[11]||(e[11]=t("label",{class:"col-sm-4 col-form-label"},"Qr Char Size",-1)),t("div",P,[v(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>r.qrMaxSize=o),class:"form-control",step:"100",max:"2300"},null,512),[[p,r.qrMaxSize]])])]),t("div",F,[e[12]||(e[12]=t("label",{class:"col-sm-4 col-form-label"},"Qr Img Size",-1)),t("div",Z,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.qrImgSize=o),class:"form-control"},[(d(!0),a(I,null,w(r.qrImgSizeItems,o=>(d(),a("option",{value:o,key:o},c(o),9,H))),128))],512),[[q,r.qrImgSize]])])])]),t("textarea",{onInput:e[2]||(e[2]=o=>i.textSize(o)),class:"form-control",rows:"9",id:"qrText"},null,32),t("div",G,[t("div",K,[t("div",O,"Char length : "+c(r.qrTextSize),1),t("button",{onClick:e[3]||(e[3]=o=>i.convert()),type:"button",class:"btn btn-light-secondary float-end"},"Convert"),r.errorMessage!=""?(d(),a("div",X,"Error : "+c(r.errorMessage),1)):_("",!0)])])]),t("div",J,[r.imgIdx>1?(d(),a("nav",W,[t("div",Y,[t("a",{href:"javascript:;",onClick:e[4]||(e[4]=o=>i.viewPage("p"))},"< Prev"),t("a",{href:"javascript:;",onClick:e[5]||(e[5]=o=>i.viewPage("n")),style:{"margin-left":"10px"}},"Next >")]),t("ul",$,[t("li",ee,[t("a",{class:"page-link",onClick:e[6]||(e[6]=o=>i.viewImg(1))},"1")]),(d(!0),a(I,null,w(r.pagingNums,o=>(d(),a("li",{class:S(["page-item",r.currentImgIdx==o?"active":""])},[t("a",{class:"page-link",href:"javascript:;",onClick:f=>i.viewImg(o)},c(o),9,te)],2))),256)),t("li",se,[t("a",{class:"page-link",onClick:e[7]||(e[7]=o=>i.viewImg(r.imgIdx))},c(r.imgIdx),1)])])])):_("",!0),e[13]||(e[13]=t("div",{class:"mb-3",style:{padding:"15px",width:"100%","min-height":"203px",overflow:"auto",border:"1px solid #dddddd"}},[t("canvas",{id:"qrImageViewer"})],-1)),t("div",oe,[t("button",{onClick:e[8]||(e[8]=o=>i.qrImgDownload()),type:"button",class:"btn btn btn-primary"},"download")]),e[14]||(e[14]=t("div",null,"View Qr Text",-1)),v(t("textarea",{class:"form-control",rows:"9","onUpdate:modelValue":e[9]||(e[9]=o=>r.viewQrContent=o)},null,512),[[p,r.viewQrContent]])])])])])])])])}const le=y(k,[["render",re]]);export{le as default};
