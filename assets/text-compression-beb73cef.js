import{_ as f,l as T,c as y,b as o,t as l,e as d,v as p,o as _}from"./index-5ebfd429.js";const b={data(){return{compressText:"",compressTextInfo:"",compressStatus:"",resultText:"",decompressText:"",decompressStatus:"",scriptLoaded:!1}},methods:{compress(e){this.isTreeViewer=e,this.compressText!=""&&(this.scriptLoaded?this.textCompress(e):(this.scriptLoaded=!0,T({js:["/assets/static/js/plugins/lzma_worker-min.js"]}).then(()=>{this.textCompress(e)}).catch(s=>{console.error("스크립트 로드 실패:",s)})))},textInput(){const e=this.compressText,s=m(e);this.compressTextInfo=`문자 수: ${e.length} | UTF-8 바이트: ${s}`},textCompress(e){const s=this.compressText;if(e)LZMA.compress(s,6,(r,n)=>{if(n){this.resultText="압축 에러: "+n;return}try{const t=h(r),c=g(t);this.resultText=c;const i=m(s),a=t.length,u=a/i*100,x=100-u;this.compressStatus=`압축 바이트: ${a} | 압축률: ${u.toFixed(2)}% (절감률 ${x.toFixed(2)}%)`}catch(t){this.resultText="결과 처리 에러: "+t.message}});else{const r=this.resultText;if(!r){this.decompressText="먼저 Base64 압축 결과가 있어야 합니다.";return}let n;try{n=v(r)}catch(t){this.decompressText="Base64 디코딩 실패: "+t.message;return}LZMA.decompress(n,(t,c)=>{if(c){this.decompressText="해제 에러: "+c;return}typeof t=="string"?(this.decompressText=t,this.decompressStatus=`해제된 문자 수: ${t.length} | UTF-8 바이트: ${m(t)}`):t instanceof Uint8Array?(this.decompressText="[바이너리 데이터] 길이: "+t.length+" bytes",this.decompressStatus="바이너리 데이터는 텍스트로 표시되지 않습니다."):(this.decompressText="",this.decompressStatus="알 수 없는 해제 결과 형식입니다.")})}}}};function m(e){return new TextEncoder().encode(e).length}function h(e){if(e instanceof Uint8Array)return e;if(e instanceof Int8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(Array.isArray(e)){const s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e[r]&255;return s}throw new Error("알 수 없는 바이트 배열 형식입니다.")}function g(e){const s=h(e);let r="";const n=32768;for(let t=0;t<s.length;t+=n)r+=String.fromCharCode.apply(null,s.subarray(t,t+n));return btoa(r)}function v(e){const s=atob(e.trim()),r=new Uint8Array(s.length);for(let n=0;n<s.length;n++)r[n]=s.charCodeAt(n);return r}const w={class:"page-heading"},A={class:"page-title"},U={class:"row"},B={class:"col-12 col-md-6 order-md-1 order-last"},C={class:"section"},S={class:"card"},I={class:"card-body"},L={id:"mainForm"},k={class:"row"},F={class:"col-sm mb-3"},V={class:"mb-3"},j={class:"col-12 mb-2",style:{"border-radius":"3px",padding:"5px 0px"}},E={class:"btn-example float-end"},M={style:{"margin-top":"10px"}},$={class:"col-sm"},D={style:{padding:"15px",border:"1px solid #dddddd"}},N={style:{height:"30px","padding-top":"10px"}},Z={class:"float-end"},z={style:{"padding-top":"15px"}};function H(e,s,r,n,t,c){return _(),y("div",w,[o("div",A,[o("div",U,[o("div",B,[o("h3",null,l(e.$t("menu.text_compression")),1)])])]),o("section",C,[o("div",S,[o("div",I,[o("form",L,[o("div",k,[o("div",F,[o("div",V,[o("div",j,[o("div",null,[o("div",E,[o("button",{type:"button",class:"btn btn-light-secondary btn-sm",onClick:s[0]||(s[0]=i=>c.compress(!0))},"압축")])])])]),d(o("textarea",{class:"form-control",rows:"10","onUpdate:modelValue":s[1]||(s[1]=i=>t.compressText=i),ref:"compressText",placeholder:"Text",onInput:s[2]||(s[2]=i=>c.textInput())},null,544),[[p,t.compressText]]),o("div",null,l(t.compressTextInfo),1),o("div",M,l(t.compressStatus),1)]),o("div",$,[o("div",D,[d(o("textarea",{class:"form-control",rows:"10",id:"resultText","onUpdate:modelValue":s[3]||(s[3]=i=>t.resultText=i)},null,512),[[p,t.resultText]])]),o("div",N,[o("div",Z,[o("button",{type:"button",class:"btn btn-light-primary btn-sm",onClick:s[4]||(s[4]=i=>c.compress(!1))},"해제")])]),o("div",z,[o("div",null,l(t.decompressStatus),1),d(o("textarea",{class:"form-control",rows:"13",id:"decompressText","onUpdate:modelValue":s[5]||(s[5]=i=>t.decompressText=i),readonly:""},null,512),[[p,t.decompressText]])])])])])])])])])}const O=f(b,[["render",H]]);export{O as default};
