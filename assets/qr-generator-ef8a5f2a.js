import{_ as p,p as h,c as a,b as t,t as d,e as v,v as x,q as u,F as I,r as f,o as c,s as _}from"./index-b5b2928e.js";function w(s){return/^-?\d+$/.test(s)}const C={mounted(){let s=localStorage.getItem("vtoolQrText");s&&(document.getElementById("qrText").value=s)},data(){return{qrTextSize:0,scriptLoaded:!1,errorMessage:"",currentImgIdx:0,imgIdx:0,qrMaxSize:2e3,pagingQrTextMap:{},pagingNums:[],viewQrContent:""}},methods:{textSize(s){this.qrTextSize=s.target.value.length},convert(){this.scriptLoaded?this.createQRCode():h("/assets/static/js/plugins/qrcode.min.js").then(()=>{this.scriptLoaded=!0,this.createQRCode()}).catch(s=>{console.error("스크립트 로드 실패:",s)})},createQRCode(){let s=document.getElementById("qrText").value;const e=this.qrMaxSize;localStorage.setItem("vtoolQrText",s);let n="",l=0,r="",i="",o=0,g={};for(let m=0;m<s.length;m++)i=s.charAt(m),!(r==`
`&&i==`
`)&&(w(i)?o++:escape(i).length>4?o+=4:o+=2,n+=i,o>e&&(++l,g[l]=n,o=0,n=""),r=i);n.length>0&&(++l,g[l]=n),this.pagingQrTextMap=g,this.imgIdx=l,this.viewImg(1)},qrImgDownload(){const s=document.getElementById("qrImageViewer"),e=document.createElement("a");e.href=s.toDataURL("image/png"),e.download="canvas-image.png",e.click()},viewPage(s){let e=0;s=="n"?e=this.currentImgIdx+1:e=this.currentImgIdx-1,e=e<1?1:this.imgIdx<=e?this.imgIdx:e,this.viewImg(e)},viewImg(s){this.currentImgIdx=s;let e=0,n=0;s<5?e=1:e=s-4,e+9>=this.imgIdx?n=this.imgIdx:n=e+9,e=n-e==9?e:n-9,e=e<0?1:e;let l=[];for(let i=e;i<=n;i++)l.push(i);this.pagingNums=l;let r=this.pagingQrTextMap[s];this.viewQrContent=r,QRCode.toCanvas(document.getElementById("qrImageViewer"),r,{errorCorrectionLevel:"M",width:128,height:128},i=>{i?(this.errorMessage=i.message,console.error(i)):console.log("QR code generated!")})}}},b={class:"page-heading"},q={class:"page-title"},y={class:"row"},Q={class:"col-12 col-md-6 order-md-1 order-last"},T={class:"section"},k={class:"card"},M={class:"card-body"},S={id:"mainForm"},z={class:"row"},E={class:"col-sm mb-3"},N={class:"mb-3"},V={class:"col-sm row"},B={class:"col-sm-8"},R={class:"mb-3 col-sm-12 clearfix"},j={class:"float-end"},L={class:"mb-1"},D={key:0,style:{clear:"both",color:"#ff0707","font-weight":"bold"}},P={class:"col-sm"},A={key:0,"aria-label":"Page navigation"},F={style:{"text-align":"center"}},U={class:"pagination justify-content-center",style:{"margin-top":"10px"}},G={class:"page-item"},H=["onClick"],X={class:"page-item"},Z={class:"float-end"};function J(s,e,n,l,r,i){return c(),a("div",b,[t("div",q,[t("div",y,[t("div",Q,[t("h3",null,d(s.$t("menu.qr_qenerator")),1),e[9]||(e[9]=t("p",{class:"text-subtitle text-muted"},"Qr Code",-1))])])]),t("section",T,[t("div",k,[t("div",M,[t("form",S,[t("div",z,[t("div",E,[t("div",N,[t("div",V,[e[10]||(e[10]=t("label",{class:"col-sm-4 col-form-label"},"Qr Char Size",-1)),t("div",B,[v(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>r.qrMaxSize=o),class:"form-control",step:"100",max:"2300"},null,512),[[x,r.qrMaxSize]])])])]),t("textarea",{onInput:e[1]||(e[1]=o=>i.textSize(o)),class:"form-control",rows:"9",id:"qrText"},null,32),t("div",R,[t("div",j,[t("div",L,"Char length : "+d(r.qrTextSize),1),t("button",{onClick:e[2]||(e[2]=o=>i.convert()),type:"button",class:"btn btn-light-secondary float-end"},"Convert"),r.errorMessage!=""?(c(),a("div",D,"Error : "+d(r.errorMessage),1)):u("",!0)])])]),t("div",P,[r.imgIdx>1?(c(),a("nav",A,[t("div",F,[t("a",{href:"javascript:;",onClick:e[3]||(e[3]=o=>i.viewPage("p"))},"< Prev"),t("a",{href:"javascript:;",onClick:e[4]||(e[4]=o=>i.viewPage("n")),style:{"margin-left":"10px"}},"Next >")]),t("ul",U,[t("li",G,[t("a",{class:"page-link",onClick:e[5]||(e[5]=o=>i.viewImg(1))},"1")]),(c(!0),a(I,null,f(r.pagingNums,o=>(c(),a("li",{class:_(["page-item",r.currentImgIdx==o?"active":""])},[t("a",{class:"page-link",href:"javascript:;",onClick:g=>i.viewImg(o)},d(o),9,H)],2))),256)),t("li",X,[t("a",{class:"page-link",onClick:e[6]||(e[6]=o=>i.viewImg(r.imgIdx))},d(r.imgIdx),1)])])])):u("",!0),e[11]||(e[11]=t("div",{class:"mb-3",style:{padding:"15px",width:"100%","min-height":"203px",overflow:"auto",border:"1px solid #dddddd"}},[t("canvas",{id:"qrImageViewer"})],-1)),t("div",Z,[t("button",{onClick:e[7]||(e[7]=o=>i.qrImgDownload()),type:"button",class:"btn btn btn-primary"},"download")]),e[12]||(e[12]=t("div",null,"View Qr Text",-1)),v(t("textarea",{class:"form-control",rows:"9","onUpdate:modelValue":e[8]||(e[8]=o=>r.viewQrContent=o)},null,512),[[x,r.viewQrContent]])])])])])])])])}const O=p(C,[["render",J]]);export{O as default};
